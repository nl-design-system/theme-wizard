---
import BaseLayout from '../../layouts/BaseLayout.astro';
import SearchResultsPage from './SearchResultsPage';

export const detail = {
  name: 'Resultaten',
  value: 'search-results',
  module: 'Zoeken',
};

const currentPath = Astro.url.pathname;
const searchParams = Astro.url.searchParams;

// Server-side: Extract all search parameters from the URL
const initialQuery = searchParams.get('search') || searchParams.get('query') || '';
const initialFilters = {
  documentType: searchParams.get('filter_documentType') || undefined,
  period: searchParams.get('filter_period') || undefined,
};
const initialSort = (searchParams.get('sort') as any) || 'relevance';
---

<BaseLayout title="Zoekresultaten">
  <SearchResultsPage
    client:load
    currentPath={currentPath}
    initialQuery={initialQuery}
    initialFilters={initialFilters}
    initialSort={initialSort}
  />
</BaseLayout>
